{"ast":null,"code":"import axios from 'axios';\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8080/api/v1';\n\n// Create axios instance\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Request interceptor to add auth token\napi.interceptors.request.use(config => {\n  const token = localStorage.getItem('accessToken');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\n\n// Response interceptor to handle token refresh\napi.interceptors.response.use(response => response, async error => {\n  var _error$response;\n  const originalRequest = error.config;\n  if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401 && !originalRequest._retry) {\n    originalRequest._retry = true;\n    try {\n      const refreshToken = localStorage.getItem('refreshToken');\n      if (refreshToken) {\n        const response = await axios.post(`${API_BASE_URL}/auth/refresh`, {\n          refreshToken\n        });\n        const {\n          accessToken\n        } = response.data.data;\n        localStorage.setItem('accessToken', accessToken);\n        originalRequest.headers.Authorization = `Bearer ${accessToken}`;\n        return api(originalRequest);\n      }\n    } catch (refreshError) {\n      localStorage.removeItem('accessToken');\n      localStorage.removeItem('refreshToken');\n      window.location.href = '/login';\n    }\n  }\n  return Promise.reject(error);\n});\n\n// Auth API\nexport const authApi = {\n  login: async (email, password) => {\n    const response = await api.post('/auth/login', {\n      email,\n      password\n    });\n    return response.data.data;\n  },\n  getProfile: async () => {\n    const response = await api.get('/auth/profile');\n    return response.data.data;\n  },\n  logout: async () => {\n    await api.post('/auth/logout');\n  }\n};\n\n// Users API\nexport const usersApi = {\n  getUsers: async (page = 1, limit = 20) => {\n    const response = await api.get(`/admin/users?page=${page}&limit=${limit}`);\n    return response.data.data;\n  },\n  blockUser: async userId => {\n    const response = await api.post(`/admin/users/${userId}/block`);\n    return response.data.data;\n  },\n  unblockUser: async userId => {\n    const response = await api.post(`/admin/users/${userId}/unblock`);\n    return response.data.data;\n  }\n};\n\n// Withdrawals API\nexport const withdrawalsApi = {\n  getWithdrawals: async (page = 1, limit = 20) => {\n    const response = await api.get(`/admin/withdrawals?page=${page}&limit=${limit}`);\n    return response.data.data;\n  },\n  approveWithdrawal: async withdrawalId => {\n    const response = await api.post(`/admin/withdrawals/${withdrawalId}/approve`);\n    return response.data.data;\n  },\n  rejectWithdrawal: async (withdrawalId, reason) => {\n    const response = await api.post(`/admin/withdrawals/${withdrawalId}/reject`, {\n      reason\n    });\n    return response.data.data;\n  }\n};\n\n// Config API\nexport const configApi = {\n  getConfig: async key => {\n    const response = await api.get(`/admin/config/${key}`);\n    return response.data.data;\n  },\n  updateConfig: async (key, config) => {\n    const response = await api.put(`/admin/config/${key}`, {\n      json: config\n    });\n    return response.data.data;\n  }\n};\n\n// Analytics API\nexport const analyticsApi = {\n  getDashboardStats: async () => {\n    const response = await api.get('/admin/analytics/dashboard');\n    return response.data.data;\n  },\n  getDailyStats: async (days = 7) => {\n    const response = await api.get(`/admin/analytics/daily?days=${days}`);\n    return response.data.data;\n  }\n};\nexport default api;","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","api","create","baseURL","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","error","Promise","reject","response","_error$response","originalRequest","status","_retry","refreshToken","post","accessToken","data","setItem","refreshError","removeItem","window","location","href","authApi","login","email","password","getProfile","get","logout","usersApi","getUsers","page","limit","blockUser","userId","unblockUser","withdrawalsApi","getWithdrawals","approveWithdrawal","withdrawalId","rejectWithdrawal","reason","configApi","getConfig","key","updateConfig","put","json","analyticsApi","getDashboardStats","getDailyStats","days"],"sources":["/Users/abdulazizgossage/StudioProjects/spin and earn/admin/src/services/api.ts"],"sourcesContent":["import axios from 'axios';\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8080/api/v1';\n\n// Create axios instance\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// Request interceptor to add auth token\napi.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem('accessToken');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\n// Response interceptor to handle token refresh\napi.interceptors.response.use(\n  (response) => response,\n  async (error) => {\n    const originalRequest = error.config;\n\n    if (error.response?.status === 401 && !originalRequest._retry) {\n      originalRequest._retry = true;\n\n      try {\n        const refreshToken = localStorage.getItem('refreshToken');\n        if (refreshToken) {\n          const response = await axios.post(`${API_BASE_URL}/auth/refresh`, {\n            refreshToken,\n          });\n\n          const { accessToken } = response.data.data;\n          localStorage.setItem('accessToken', accessToken);\n\n          originalRequest.headers.Authorization = `Bearer ${accessToken}`;\n          return api(originalRequest);\n        }\n      } catch (refreshError) {\n        localStorage.removeItem('accessToken');\n        localStorage.removeItem('refreshToken');\n        window.location.href = '/login';\n      }\n    }\n\n    return Promise.reject(error);\n  }\n);\n\n// Auth API\nexport const authApi = {\n  login: async (email: string, password: string) => {\n    const response = await api.post('/auth/login', { email, password });\n    return response.data.data;\n  },\n\n  getProfile: async () => {\n    const response = await api.get('/auth/profile');\n    return response.data.data;\n  },\n\n  logout: async () => {\n    await api.post('/auth/logout');\n  },\n};\n\n// Users API\nexport const usersApi = {\n  getUsers: async (page = 1, limit = 20) => {\n    const response = await api.get(`/admin/users?page=${page}&limit=${limit}`);\n    return response.data.data;\n  },\n\n  blockUser: async (userId: string) => {\n    const response = await api.post(`/admin/users/${userId}/block`);\n    return response.data.data;\n  },\n\n  unblockUser: async (userId: string) => {\n    const response = await api.post(`/admin/users/${userId}/unblock`);\n    return response.data.data;\n  },\n};\n\n// Withdrawals API\nexport const withdrawalsApi = {\n  getWithdrawals: async (page = 1, limit = 20) => {\n    const response = await api.get(`/admin/withdrawals?page=${page}&limit=${limit}`);\n    return response.data.data;\n  },\n\n  approveWithdrawal: async (withdrawalId: string) => {\n    const response = await api.post(`/admin/withdrawals/${withdrawalId}/approve`);\n    return response.data.data;\n  },\n\n  rejectWithdrawal: async (withdrawalId: string, reason: string) => {\n    const response = await api.post(`/admin/withdrawals/${withdrawalId}/reject`, { reason });\n    return response.data.data;\n  },\n};\n\n// Config API\nexport const configApi = {\n  getConfig: async (key: string) => {\n    const response = await api.get(`/admin/config/${key}`);\n    return response.data.data;\n  },\n\n  updateConfig: async (key: string, config: any) => {\n    const response = await api.put(`/admin/config/${key}`, { json: config });\n    return response.data.data;\n  },\n};\n\n// Analytics API\nexport const analyticsApi = {\n  getDashboardStats: async () => {\n    const response = await api.get('/admin/analytics/dashboard');\n    return response.data.data;\n  },\n\n  getDailyStats: async (days = 7) => {\n    const response = await api.get(`/admin/analytics/daily?days=${days}`);\n    return response.data.data;\n  },\n};\n\nexport default api;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}