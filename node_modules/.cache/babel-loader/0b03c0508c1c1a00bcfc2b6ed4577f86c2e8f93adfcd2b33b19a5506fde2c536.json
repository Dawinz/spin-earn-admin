{"ast":null,"code":"import axios from'axios';const API_BASE_URL=process.env.REACT_APP_API_URL||'http://localhost:8080/api/v1';// Create axios instance\nconst api=axios.create({baseURL:API_BASE_URL,headers:{'Content-Type':'application/json'}});// Request interceptor to add auth token\napi.interceptors.request.use(config=>{const token=localStorage.getItem('accessToken');if(token){config.headers.Authorization=\"Bearer \".concat(token);}return config;},error=>{return Promise.reject(error);});// Response interceptor to handle token refresh\napi.interceptors.response.use(response=>response,async error=>{var _error$response;const originalRequest=error.config;if(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===401&&!originalRequest._retry){originalRequest._retry=true;try{const refreshToken=localStorage.getItem('refreshToken');if(refreshToken){const response=await axios.post(\"\".concat(API_BASE_URL,\"/auth/refresh\"),{refreshToken});const{accessToken}=response.data.data;localStorage.setItem('accessToken',accessToken);originalRequest.headers.Authorization=\"Bearer \".concat(accessToken);return api(originalRequest);}}catch(refreshError){localStorage.removeItem('accessToken');localStorage.removeItem('refreshToken');window.location.href='/login';}}return Promise.reject(error);});// Auth API\nexport const authApi={login:async(email,password)=>{const response=await api.post('/auth/login',{email,password,deviceInfo:{fingerprintHash:'admin-dashboard-'+Date.now(),model:'Admin Dashboard',os:'Web',emulator:false,rooted:false,ipAddress:'127.0.0.1'}});return response.data.data;},getProfile:async()=>{const response=await api.get('/auth/profile');return response.data.data;},logout:async()=>{await api.post('/auth/logout');}};// Users API\nexport const usersApi={getUsers:async function(){let page=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;let limit=arguments.length>1&&arguments[1]!==undefined?arguments[1]:20;const response=await api.get(\"/admin/users?page=\".concat(page,\"&limit=\").concat(limit));return response.data.data;},blockUser:async userId=>{const response=await api.post(\"/admin/users/\".concat(userId,\"/block\"));return response.data.data;},unblockUser:async userId=>{const response=await api.post(\"/admin/users/\".concat(userId,\"/unblock\"));return response.data.data;}};// Withdrawals API\nexport const withdrawalsApi={getWithdrawals:async function(){let page=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;let limit=arguments.length>1&&arguments[1]!==undefined?arguments[1]:20;const response=await api.get(\"/admin/withdrawals?page=\".concat(page,\"&limit=\").concat(limit));return response.data.data;},approveWithdrawal:async withdrawalId=>{const response=await api.post(\"/admin/withdrawals/\".concat(withdrawalId,\"/approve\"));return response.data.data;},rejectWithdrawal:async(withdrawalId,reason)=>{const response=await api.post(\"/admin/withdrawals/\".concat(withdrawalId,\"/reject\"),{reason});return response.data.data;}};// Config API\nexport const configApi={getConfig:async key=>{const response=await api.get(\"/admin/config/\".concat(key));return response.data.data;},updateConfig:async(key,config)=>{const response=await api.put(\"/admin/config/\".concat(key),{json:config});return response.data.data;}};// Analytics API\nexport const analyticsApi={getDashboardStats:async()=>{const response=await api.get('/admin/analytics/dashboard');return response.data.data;},getDailyStats:async function(){let days=arguments.length>0&&arguments[0]!==undefined?arguments[0]:7;const response=await api.get(\"/admin/analytics/daily?days=\".concat(days));return response.data.data;}};export default api;","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","api","create","baseURL","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","concat","error","Promise","reject","response","_error$response","originalRequest","status","_retry","refreshToken","post","accessToken","data","setItem","refreshError","removeItem","window","location","href","authApi","login","email","password","deviceInfo","fingerprintHash","Date","now","model","os","emulator","rooted","ipAddress","getProfile","get","logout","usersApi","getUsers","page","arguments","length","undefined","limit","blockUser","userId","unblockUser","withdrawalsApi","getWithdrawals","approveWithdrawal","withdrawalId","rejectWithdrawal","reason","configApi","getConfig","key","updateConfig","put","json","analyticsApi","getDashboardStats","getDailyStats","days"],"sources":["/Users/abdulazizgossage/StudioProjects/spin and earn/admin/src/services/api.ts"],"sourcesContent":["import axios from 'axios';\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8080/api/v1';\n\n// Create axios instance\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// Request interceptor to add auth token\napi.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem('accessToken');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\n// Response interceptor to handle token refresh\napi.interceptors.response.use(\n  (response) => response,\n  async (error) => {\n    const originalRequest = error.config;\n\n    if (error.response?.status === 401 && !originalRequest._retry) {\n      originalRequest._retry = true;\n\n      try {\n        const refreshToken = localStorage.getItem('refreshToken');\n        if (refreshToken) {\n          const response = await axios.post(`${API_BASE_URL}/auth/refresh`, {\n            refreshToken,\n          });\n\n          const { accessToken } = response.data.data;\n          localStorage.setItem('accessToken', accessToken);\n\n          originalRequest.headers.Authorization = `Bearer ${accessToken}`;\n          return api(originalRequest);\n        }\n      } catch (refreshError) {\n        localStorage.removeItem('accessToken');\n        localStorage.removeItem('refreshToken');\n        window.location.href = '/login';\n      }\n    }\n\n    return Promise.reject(error);\n  }\n);\n\n// Auth API\nexport const authApi = {\n  login: async (email: string, password: string) => {\n    const response = await api.post('/auth/login', { \n      email, \n      password,\n      deviceInfo: {\n        fingerprintHash: 'admin-dashboard-' + Date.now(),\n        model: 'Admin Dashboard',\n        os: 'Web',\n        emulator: false,\n        rooted: false,\n        ipAddress: '127.0.0.1'\n      }\n    });\n    return response.data.data;\n  },\n\n  getProfile: async () => {\n    const response = await api.get('/auth/profile');\n    return response.data.data;\n  },\n\n  logout: async () => {\n    await api.post('/auth/logout');\n  },\n};\n\n// Users API\nexport const usersApi = {\n  getUsers: async (page = 1, limit = 20) => {\n    const response = await api.get(`/admin/users?page=${page}&limit=${limit}`);\n    return response.data.data;\n  },\n\n  blockUser: async (userId: string) => {\n    const response = await api.post(`/admin/users/${userId}/block`);\n    return response.data.data;\n  },\n\n  unblockUser: async (userId: string) => {\n    const response = await api.post(`/admin/users/${userId}/unblock`);\n    return response.data.data;\n  },\n};\n\n// Withdrawals API\nexport const withdrawalsApi = {\n  getWithdrawals: async (page = 1, limit = 20) => {\n    const response = await api.get(`/admin/withdrawals?page=${page}&limit=${limit}`);\n    return response.data.data;\n  },\n\n  approveWithdrawal: async (withdrawalId: string) => {\n    const response = await api.post(`/admin/withdrawals/${withdrawalId}/approve`);\n    return response.data.data;\n  },\n\n  rejectWithdrawal: async (withdrawalId: string, reason: string) => {\n    const response = await api.post(`/admin/withdrawals/${withdrawalId}/reject`, { reason });\n    return response.data.data;\n  },\n};\n\n// Config API\nexport const configApi = {\n  getConfig: async (key: string) => {\n    const response = await api.get(`/admin/config/${key}`);\n    return response.data.data;\n  },\n\n  updateConfig: async (key: string, config: any) => {\n    const response = await api.put(`/admin/config/${key}`, { json: config });\n    return response.data.data;\n  },\n};\n\n// Analytics API\nexport const analyticsApi = {\n  getDashboardStats: async () => {\n    const response = await api.get('/admin/analytics/dashboard');\n    return response.data.data;\n  },\n\n  getDailyStats: async (days = 7) => {\n    const response = await api.get(`/admin/analytics/daily?days=${days}`);\n    return response.data.data;\n  },\n};\n\nexport default api;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}