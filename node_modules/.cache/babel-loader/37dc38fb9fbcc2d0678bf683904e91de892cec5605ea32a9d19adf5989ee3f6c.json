{"ast":null,"code":"import React,{useState}from'react';import{useQuery,useMutation,useQueryClient}from'react-query';import{configApi}from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Config(){const[config,setConfig]=useState('');const queryClient=useQueryClient();const{data,isLoading}=useQuery('spin-config',()=>configApi.getConfig('spin_earn_policy'),{onSuccess:data=>{setConfig(JSON.stringify(data,null,2));}});const updateMutation=useMutation(newConfig=>configApi.updateConfig('spin_earn_policy',newConfig),{onSuccess:()=>{queryClient.invalidateQueries(['spin-config']);alert('Configuration updated successfully!');}});const handleSave=()=>{try{const parsedConfig=JSON.parse(config);updateMutation.mutate(parsedConfig);}catch(error){alert('Invalid JSON format');}};if(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:\"Configuration\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:\"Manage app settings and policies\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white shadow rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-5 sm:p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg leading-6 font-medium text-gray-900 mb-4\",children:\"Spin & Earn Policy\"}),/*#__PURE__*/_jsx(\"textarea\",{value:config,onChange:e=>setConfig(e.target.value),className:\"w-full h-96 px-3 py-2 border border-gray-300 rounded-md font-mono text-sm focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500\",placeholder:\"Enter JSON configuration...\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 flex justify-end\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleSave,disabled:updateMutation.isLoading,className:\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50\",children:updateMutation.isLoading?'Saving...':'Save Configuration'})})]})})]});}","map":{"version":3,"names":["React","useState","useQuery","useMutation","useQueryClient","configApi","jsx","_jsx","jsxs","_jsxs","Config","config","setConfig","queryClient","data","isLoading","getConfig","onSuccess","JSON","stringify","updateMutation","newConfig","updateConfig","invalidateQueries","alert","handleSave","parsedConfig","parse","mutate","error","className","children","value","onChange","e","target","placeholder","onClick","disabled"],"sources":["/Users/abdulazizgossage/StudioProjects/spin and earn/admin/src/pages/Config.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useQuery, useMutation, useQueryClient } from 'react-query';\nimport { configApi } from '../services/api';\n\nexport default function Config() {\n  const [config, setConfig] = useState('');\n  const queryClient = useQueryClient();\n\n  const { data, isLoading } = useQuery(\n    'spin-config',\n    () => configApi.getConfig('spin_earn_policy'),\n    {\n      onSuccess: (data) => {\n        setConfig(JSON.stringify(data, null, 2));\n      },\n    }\n  );\n\n  const updateMutation = useMutation(\n    (newConfig: any) => configApi.updateConfig('spin_earn_policy', newConfig),\n    {\n      onSuccess: () => {\n        queryClient.invalidateQueries(['spin-config']);\n        alert('Configuration updated successfully!');\n      },\n    }\n  );\n\n  const handleSave = () => {\n    try {\n      const parsedConfig = JSON.parse(config);\n      updateMutation.mutate(parsedConfig);\n    } catch (error) {\n      alert('Invalid JSON format');\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-2xl font-bold text-gray-900\">Configuration</h1>\n        <p className=\"mt-1 text-sm text-gray-500\">\n          Manage app settings and policies\n        </p>\n      </div>\n\n      <div className=\"bg-white shadow rounded-lg\">\n        <div className=\"px-4 py-5 sm:p-6\">\n          <h3 className=\"text-lg leading-6 font-medium text-gray-900 mb-4\">\n            Spin & Earn Policy\n          </h3>\n          <textarea\n            value={config}\n            onChange={(e) => setConfig(e.target.value)}\n            className=\"w-full h-96 px-3 py-2 border border-gray-300 rounded-md font-mono text-sm focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500\"\n            placeholder=\"Enter JSON configuration...\"\n          />\n          <div className=\"mt-4 flex justify-end\">\n            <button\n              onClick={handleSave}\n              disabled={updateMutation.isLoading}\n              className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50\"\n            >\n              {updateMutation.isLoading ? 'Saving...' : 'Save Configuration'}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,QAAQ,CAAEC,WAAW,CAAEC,cAAc,KAAQ,aAAa,CACnE,OAASC,SAAS,KAAQ,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE5C,cAAe,SAAS,CAAAC,MAAMA,CAAA,CAAG,CAC/B,KAAM,CAACC,MAAM,CAAEC,SAAS,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAAAY,WAAW,CAAGT,cAAc,CAAC,CAAC,CAEpC,KAAM,CAAEU,IAAI,CAAEC,SAAU,CAAC,CAAGb,QAAQ,CAClC,aAAa,CACb,IAAMG,SAAS,CAACW,SAAS,CAAC,kBAAkB,CAAC,CAC7C,CACEC,SAAS,CAAGH,IAAI,EAAK,CACnBF,SAAS,CAACM,IAAI,CAACC,SAAS,CAACL,IAAI,CAAE,IAAI,CAAE,CAAC,CAAC,CAAC,CAC1C,CACF,CACF,CAAC,CAED,KAAM,CAAAM,cAAc,CAAGjB,WAAW,CAC/BkB,SAAc,EAAKhB,SAAS,CAACiB,YAAY,CAAC,kBAAkB,CAAED,SAAS,CAAC,CACzE,CACEJ,SAAS,CAAEA,CAAA,GAAM,CACfJ,WAAW,CAACU,iBAAiB,CAAC,CAAC,aAAa,CAAC,CAAC,CAC9CC,KAAK,CAAC,qCAAqC,CAAC,CAC9C,CACF,CACF,CAAC,CAED,KAAM,CAAAC,UAAU,CAAGA,CAAA,GAAM,CACvB,GAAI,CACF,KAAM,CAAAC,YAAY,CAAGR,IAAI,CAACS,KAAK,CAAChB,MAAM,CAAC,CACvCS,cAAc,CAACQ,MAAM,CAACF,YAAY,CAAC,CACrC,CAAE,MAAOG,KAAK,CAAE,CACdL,KAAK,CAAC,qBAAqB,CAAC,CAC9B,CACF,CAAC,CAED,GAAIT,SAAS,CAAE,CACb,mBACER,IAAA,QAAKuB,SAAS,CAAC,uCAAuC,CAAAC,QAAA,cACpDxB,IAAA,QAAKuB,SAAS,CAAC,mEAAmE,CAAM,CAAC,CACtF,CAAC,CAEV,CAEA,mBACErB,KAAA,QAAKqB,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBtB,KAAA,QAAAsB,QAAA,eACExB,IAAA,OAAIuB,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAC,eAAa,CAAI,CAAC,cACnExB,IAAA,MAAGuB,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAC,kCAE1C,CAAG,CAAC,EACD,CAAC,cAENxB,IAAA,QAAKuB,SAAS,CAAC,4BAA4B,CAAAC,QAAA,cACzCtB,KAAA,QAAKqB,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/BxB,IAAA,OAAIuB,SAAS,CAAC,kDAAkD,CAAAC,QAAA,CAAC,oBAEjE,CAAI,CAAC,cACLxB,IAAA,aACEyB,KAAK,CAAErB,MAAO,CACdsB,QAAQ,CAAGC,CAAC,EAAKtB,SAAS,CAACsB,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAC3CF,SAAS,CAAC,2JAA2J,CACrKM,WAAW,CAAC,6BAA6B,CAC1C,CAAC,cACF7B,IAAA,QAAKuB,SAAS,CAAC,uBAAuB,CAAAC,QAAA,cACpCxB,IAAA,WACE8B,OAAO,CAAEZ,UAAW,CACpBa,QAAQ,CAAElB,cAAc,CAACL,SAAU,CACnCe,SAAS,CAAC,2OAA2O,CAAAC,QAAA,CAEpPX,cAAc,CAACL,SAAS,CAAG,WAAW,CAAG,oBAAoB,CACxD,CAAC,CACN,CAAC,EACH,CAAC,CACH,CAAC,EACH,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}