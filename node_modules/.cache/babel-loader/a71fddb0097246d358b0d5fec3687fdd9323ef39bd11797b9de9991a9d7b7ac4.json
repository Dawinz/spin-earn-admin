{"ast":null,"code":"import axios from 'axios';\n\n// API Base URL - will use production URL in production, localhost in development\nconst API_BASE_URL = process.env.REACT_APP_API_URL || (process.env.NODE_ENV === 'production' ? 'https://your-backend.onrender.com/api/v1' : 'http://localhost:8080/api/v1');\n\n// Create axios instance\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  },\n  timeout: 10000 // 10 second timeout\n});\n\n// Request interceptor to add auth token\napi.interceptors.request.use(config => {\n  const token = localStorage.getItem('accessToken');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\n\n// Response interceptor to handle token refresh\napi.interceptors.response.use(response => response, async error => {\n  var _error$response;\n  const originalRequest = error.config;\n  if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401 && !originalRequest._retry) {\n    originalRequest._retry = true;\n    try {\n      const refreshToken = localStorage.getItem('refreshToken');\n      if (refreshToken) {\n        const response = await axios.post(`${API_BASE_URL}/auth/refresh`, {\n          refreshToken\n        });\n        const {\n          accessToken\n        } = response.data.data;\n        localStorage.setItem('accessToken', accessToken);\n        originalRequest.headers.Authorization = `Bearer ${accessToken}`;\n        return api(originalRequest);\n      }\n    } catch (refreshError) {\n      localStorage.removeItem('accessToken');\n      localStorage.removeItem('refreshToken');\n      window.location.href = '/login';\n    }\n  }\n  return Promise.reject(error);\n});\n\n// Auth API\nexport const authApi = {\n  login: async (email, password) => {\n    const response = await api.post('/auth/login', {\n      email,\n      password,\n      deviceInfo: {\n        fingerprintHash: 'admin-dashboard-' + Date.now(),\n        model: 'Admin Dashboard',\n        os: 'Web',\n        emulator: false,\n        rooted: false,\n        ipAddress: '127.0.0.1'\n      }\n    });\n    return response.data.data;\n  },\n  getProfile: async () => {\n    const response = await api.get('/auth/profile');\n    return response.data.data;\n  },\n  logout: async () => {\n    await api.post('/auth/logout');\n  }\n};\n\n// Users API\nexport const usersApi = {\n  getUsers: async (page = 1, limit = 20) => {\n    const response = await api.get(`/admin/users?page=${page}&limit=${limit}`);\n    return response.data.data;\n  },\n  blockUser: async userId => {\n    const response = await api.post(`/admin/users/${userId}/block`);\n    return response.data.data;\n  },\n  unblockUser: async userId => {\n    const response = await api.post(`/admin/users/${userId}/unblock`);\n    return response.data.data;\n  }\n};\n\n// Withdrawals API\nexport const withdrawalsApi = {\n  getWithdrawals: async (page = 1, limit = 20) => {\n    const response = await api.get(`/admin/withdrawals?page=${page}&limit=${limit}`);\n    return response.data.data;\n  },\n  approveWithdrawal: async withdrawalId => {\n    const response = await api.post(`/admin/withdrawals/${withdrawalId}/approve`);\n    return response.data.data;\n  },\n  rejectWithdrawal: async (withdrawalId, reason) => {\n    const response = await api.post(`/admin/withdrawals/${withdrawalId}/reject`, {\n      reason\n    });\n    return response.data.data;\n  }\n};\n\n// Config API\nexport const configApi = {\n  getConfig: async key => {\n    const response = await api.get(`/admin/config/${key}`);\n    return response.data.data;\n  },\n  updateConfig: async (key, config) => {\n    const response = await api.put(`/admin/config/${key}`, {\n      json: config\n    });\n    return response.data.data;\n  }\n};\n\n// Analytics API\nexport const analyticsApi = {\n  getDashboardStats: async () => {\n    const response = await api.get('/admin/analytics/dashboard');\n    return response.data.data;\n  },\n  getDailyStats: async (days = 7) => {\n    const response = await api.get(`/admin/analytics/daily?days=${days}`);\n    return response.data.data;\n  }\n};\nexport default api;","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","NODE_ENV","api","create","baseURL","headers","timeout","interceptors","request","use","config","token","localStorage","getItem","Authorization","error","Promise","reject","response","_error$response","originalRequest","status","_retry","refreshToken","post","accessToken","data","setItem","refreshError","removeItem","window","location","href","authApi","login","email","password","deviceInfo","fingerprintHash","Date","now","model","os","emulator","rooted","ipAddress","getProfile","get","logout","usersApi","getUsers","page","limit","blockUser","userId","unblockUser","withdrawalsApi","getWithdrawals","approveWithdrawal","withdrawalId","rejectWithdrawal","reason","configApi","getConfig","key","updateConfig","put","json","analyticsApi","getDashboardStats","getDailyStats","days"],"sources":["/Users/abdulazizgossage/StudioProjects/spin and earn/admin/src/services/api.ts"],"sourcesContent":["import axios from 'axios';\n\n// API Base URL - will use production URL in production, localhost in development\nconst API_BASE_URL = process.env.REACT_APP_API_URL || \n  (process.env.NODE_ENV === 'production' \n    ? 'https://your-backend.onrender.com/api/v1'\n    : 'http://localhost:8080/api/v1');\n\n// Create axios instance\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n  timeout: 10000, // 10 second timeout\n});\n\n// Request interceptor to add auth token\napi.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem('accessToken');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\n// Response interceptor to handle token refresh\napi.interceptors.response.use(\n  (response) => response,\n  async (error) => {\n    const originalRequest = error.config;\n\n    if (error.response?.status === 401 && !originalRequest._retry) {\n      originalRequest._retry = true;\n\n      try {\n        const refreshToken = localStorage.getItem('refreshToken');\n        if (refreshToken) {\n          const response = await axios.post(`${API_BASE_URL}/auth/refresh`, {\n            refreshToken,\n          });\n\n          const { accessToken } = response.data.data;\n          localStorage.setItem('accessToken', accessToken);\n\n          originalRequest.headers.Authorization = `Bearer ${accessToken}`;\n          return api(originalRequest);\n        }\n      } catch (refreshError) {\n        localStorage.removeItem('accessToken');\n        localStorage.removeItem('refreshToken');\n        window.location.href = '/login';\n      }\n    }\n\n    return Promise.reject(error);\n  }\n);\n\n// Auth API\nexport const authApi = {\n  login: async (email: string, password: string) => {\n    const response = await api.post('/auth/login', { \n      email, \n      password,\n      deviceInfo: {\n        fingerprintHash: 'admin-dashboard-' + Date.now(),\n        model: 'Admin Dashboard',\n        os: 'Web',\n        emulator: false,\n        rooted: false,\n        ipAddress: '127.0.0.1'\n      }\n    });\n    return response.data.data;\n  },\n\n  getProfile: async () => {\n    const response = await api.get('/auth/profile');\n    return response.data.data;\n  },\n\n  logout: async () => {\n    await api.post('/auth/logout');\n  },\n};\n\n// Users API\nexport const usersApi = {\n  getUsers: async (page = 1, limit = 20) => {\n    const response = await api.get(`/admin/users?page=${page}&limit=${limit}`);\n    return response.data.data;\n  },\n\n  blockUser: async (userId: string) => {\n    const response = await api.post(`/admin/users/${userId}/block`);\n    return response.data.data;\n  },\n\n  unblockUser: async (userId: string) => {\n    const response = await api.post(`/admin/users/${userId}/unblock`);\n    return response.data.data;\n  },\n};\n\n// Withdrawals API\nexport const withdrawalsApi = {\n  getWithdrawals: async (page = 1, limit = 20) => {\n    const response = await api.get(`/admin/withdrawals?page=${page}&limit=${limit}`);\n    return response.data.data;\n  },\n\n  approveWithdrawal: async (withdrawalId: string) => {\n    const response = await api.post(`/admin/withdrawals/${withdrawalId}/approve`);\n    return response.data.data;\n  },\n\n  rejectWithdrawal: async (withdrawalId: string, reason: string) => {\n    const response = await api.post(`/admin/withdrawals/${withdrawalId}/reject`, { reason });\n    return response.data.data;\n  },\n};\n\n// Config API\nexport const configApi = {\n  getConfig: async (key: string) => {\n    const response = await api.get(`/admin/config/${key}`);\n    return response.data.data;\n  },\n\n  updateConfig: async (key: string, config: any) => {\n    const response = await api.put(`/admin/config/${key}`, { json: config });\n    return response.data.data;\n  },\n};\n\n// Analytics API\nexport const analyticsApi = {\n  getDashboardStats: async () => {\n    const response = await api.get('/admin/analytics/dashboard');\n    return response.data.data;\n  },\n\n  getDailyStats: async (days = 7) => {\n    const response = await api.get(`/admin/analytics/daily?days=${days}`);\n    return response.data.data;\n  },\n};\n\nexport default api;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}